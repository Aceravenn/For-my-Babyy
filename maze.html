<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Maze Game babyy!</title>

<style>
body{
  margin:0;
  background:#400000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Arial;
  color:white;
  overflow:hidden;
}

.container{
  text-align:center;
  width:95%;
  max-width:700px;
}

canvas{
  background:white;
  border:5px solid #800000;
  border-radius:12px;
}

#message{
  font-size:20px;
  font-weight:bold;
  margin-top:10px;
  min-height:30px;
}

#nextBtn{
  display:none;
  margin-top:10px;
  padding:12px 18px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:#a00000;
  color:white;
}

.controls{
  margin-top:12px;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:12px;
}

.controls button{
  width:85px;
  height:65px;
  font-size:28px;
  border:none;
  border-radius:12px;
  background:#cc0000;
  color:white;
}
</style>
</head>

<body>
<div class="container">
<h2>Navigate through the maze to reach your babyy!</h2>

<canvas id="mazeCanvas"></canvas>

<div id="message"></div>

<button id="nextBtn" onclick="location.href='nextpage.html'">
Click when you're ready to see the website babyy!
</button>

<div class="controls">
  <button onclick="move(0,-1)">â¬†</button>
  <button onclick="move(-1,0)">â¬…</button>
  <button onclick="move(1,0)">âž¡</button>
  <button onclick="move(0,1)">â¬‡</button>
</div>
</div>

<script>
const canvas=document.getElementById("mazeCanvas");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
  const size=Math.min(window.innerWidth*0.85,window.innerHeight*0.55,500);
  canvas.width=size;
  canvas.height=size;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

const rows=18;
const cols=18;
let cellSize;

let maze=[];
let player={x:0,y:0};
let goal={x:cols-1,y:rows-1};

function generateMaze(){
  maze=[];
  for(let y=0;y<rows;y++){
    let row=[];
    for(let x=0;x<cols;x++){
      row.push({visited:false,walls:[true,true,true,true]});
    }
    maze.push(row);
  }

  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      let j=Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }

  function carve(x,y){
    maze[y][x].visited=true;
    let dirs=shuffle([0,1,2,3]);
    for(let dir of dirs){
      let nx=x,ny=y;
      if(dir===0) ny--;
      if(dir===1) nx++;
      if(dir===2) ny++;
      if(dir===3) nx--;
      if(nx>=0 && ny>=0 && nx<cols && ny<rows && !maze[ny][nx].visited){
        maze[y][x].walls[dir]=false;
        maze[ny][nx].walls[(dir+2)%4]=false;
        carve(nx,ny);
      }
    }
  }
  carve(0,0);
}

function drawMaze(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  cellSize=canvas.width/rows;
  ctx.strokeStyle="#800000";
  ctx.lineWidth=3;

  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      let c=maze[y][x];
      let px=x*cellSize;
      let py=y*cellSize;

      if(c.walls[0]){ctx.beginPath();ctx.moveTo(px,py);ctx.lineTo(px+cellSize,py);ctx.stroke();}
      if(c.walls[1]){ctx.beginPath();ctx.moveTo(px+cellSize,py);ctx.lineTo(px+cellSize,py+cellSize);ctx.stroke();}
      if(c.walls[2]){ctx.beginPath();ctx.moveTo(px,py+cellSize);ctx.lineTo(px+cellSize,py+cellSize);ctx.stroke();}
      if(c.walls[3]){ctx.beginPath();ctx.moveTo(px,py);ctx.lineTo(px,py+cellSize);ctx.stroke();}
    }
  }

  // FINISH LINE ICON ðŸ
  ctx.font = `${cellSize*0.7}px Arial`;
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText("ðŸ", goal.x*cellSize + cellSize/2, goal.y*cellSize + cellSize/2);

  // PLAYER â€” White heart ðŸ¤
  ctx.fillText("ðŸ¤", player.x*cellSize + cellSize/2, player.y*cellSize + cellSize/2);
}

function move(dx,dy){
  let cell=maze[player.y][player.x];
  if(dy===-1 && !cell.walls[0]) player.y--;
  if(dx===1 && !cell.walls[1]) player.x++;
  if(dy===1 && !cell.walls[2]) player.y++;
  if(dx===-1 && !cell.walls[3]) player.x--;

  drawMaze();
  checkWin();
}

function checkWin(){
  if(player.x===goal.x && player.y===goal.y){
    document.getElementById("message").innerText="You're so good babyy, nice oneee!";
    document.getElementById("nextBtn").style.display="inline-block";
  }
}

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp") move(0,-1);
  if(e.key==="ArrowDown") move(0,1);
  if(e.key==="ArrowLeft") move(-1,0);
  if(e.key==="ArrowRight") move(1,0);
});

let startX=0,startY=0;

canvas.addEventListener("touchstart",e=>{
  let t=e.touches[0];
  startX=t.clientX;
  startY=t.clientY;
},{passive:true});

canvas.addEventListener("touchend",e=>{
  let t=e.changedTouches[0];
  let dx=t.clientX-startX;
  let dy=t.clientY-startY;

  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>20) move(1,0);
    else if(dx<-20) move(-1,0);
  }else{
    if(dy>20) move(0,1);
    else if(dy<-20) move(0,-1);
  }
});

generateMaze();
drawMaze();
</script>

</body>
</html>
